:root{
  --pink-100:#fff0f6;
  --pink-200:#ffd6e8;
  --pink-300:#ffb3d1;
  --pink-400:#ff88b8;
  --pink-500:#ff5fa2;
  --pink-600:#ff3b8a;
  --white:#ffffff;
  --road:#f4a0c2;
  --road-shadow:rgba(255,90,140,0.14);
  --glass:rgba(255,255,255,0.12);
  --glass-border:rgba(255,255,255,0.25);
  --text:#3a2030;
  --gold:#ffd66b;
  --milestone-duration:9s;
  --loop-gap:1s;
}

*{box-sizing:border-box;}
html,body{height:100%;margin:0;padding:0;font-family:"Poppins",system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;background:var(--pink-100);color:var(--text);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;overflow:hidden;}

.intro-overlay{position:fixed;inset:0;display:grid;place-items:center;z-index:60;background:linear-gradient(180deg,rgba(255,230,240,0.95),rgba(255,245,248,0.85));backdrop-filter:blur(4px);transition:opacity 600ms ease, transform 600ms ease;}
.intro-overlay[aria-hidden="true"]{opacity:0;pointer-events:none;transform:translateY(-6%);}
.intro-content{text-align:center;max-width:860px;padding:32px;}
.intro-title{font-size:clamp(28px,6vw,48px);margin:0 0 10px;color:var(--pink-600);letter-spacing:-0.02em;font-weight:700;text-shadow:0 6px 20px rgba(255,120,150,0.08);}
.intro-sub{margin:0 0 20px;font-size:clamp(14px,2.4vw,18px);color:#4b2740;opacity:0.9;}
.btn-begin{appearance:none;border:none;background:linear-gradient(180deg,var(--pink-500),var(--pink-600));color:var(--white);padding:12px 20px;border-radius:999px;font-weight:600;font-size:16px;cursor:pointer;box-shadow:0 8px 30px rgba(255,80,140,0.18);transition:transform .16s ease,box-shadow .16s ease;}
.btn-begin:active{transform:translateY(2px) scale(.998);}
.btn-begin:focus{outline:3px solid rgba(255,95,162,0.18);}
.intro-sheen{position:absolute;inset:0;pointer-events:none;background:radial-gradient(600px 200px at 50% 20%, rgba(255,255,255,0.4), transparent 30%);mix-blend-mode:overlay;opacity:0.65;filter:blur(18px);}

.bg-layer{position:fixed;inset:0;z-index:0;pointer-events:none;}
.bg-sky{background:linear-gradient(180deg,var(--pink-200),#fff5f8 40%,#fff8fb 100%);z-index:-10;transition:background 1s linear;}
.bg-clouds{z-index:-9;background:radial-gradient(40% 12% at 15% 20%, rgba(255,255,255,0.7), transparent 40%), radial-gradient(55% 16% at 65% 25%, rgba(255,255,255,0.75), transparent 35%), radial-gradient(30% 10% at 85% 12%, rgba(255,255,255,0.6), transparent 40%);opacity:0.95;animation:cloudsMove 40s linear infinite;filter:blur(8px);}
@keyframes cloudsMove{from{transform:translateY(-2%) translateX(0);}to{transform:translateY(-1%) translateX(-6%);}}
.bg-fog{z-index:-8;background:linear-gradient(180deg,rgba(255,255,255,0.06),rgba(255,200,230,0.04));opacity:0.9;animation:fogDrift 28s linear infinite;mix-blend-mode:screen;filter:blur(14px);}
@keyframes fogDrift{0%{transform:translateY(0) translateX(0);}50%{transform:translateY(-2%) translateX(1%);}100%{transform:translateY(0) translateX(0);}}
.bg-stars{z-index:-7;background-image:radial-gradient(rgba(255,255,255,0.85) 1px, transparent 2px);background-size:180px 180px;opacity:0;filter:blur(1px);animation:twinkle 8s linear infinite;}
@keyframes twinkle{0%,90%{opacity:0;transform:translateY(0);}92%{opacity:0.3;transform:translateY(-1%);}100%{opacity:0;transform:translateY(0);}}

.scene{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:10;pointer-events:none;transform-origin:center;animation:cameraDrift 18s ease-in-out infinite;}
@keyframes cameraDrift{0%{transform:scale(1) translateX(0);}25%{transform:scale(1.03) translateX(-1%);}50%{transform:scale(1.06) translateX(0);}75%{transform:scale(1.02) translateX(1%);}100%{transform:scale(1) translateX(0);}}
.roadside{width:calc((100vw - min(720px,62vw))/2);max-width:280px;height:100%;pointer-events:none;z-index:9;}
.roadside-left{float:left;}.roadside-right{float:right;}
.roadside::before,.roadside::after{content:"";position:absolute;width:18px;height:18px;border-radius:50%;background:linear-gradient(180deg,var(--pink-300),var(--pink-500));opacity:0.08;left:8%;top:25%;transform:rotate(12deg);}

.road-container{width:clamp(200px,22vw,260px);height:120vh;display:block;position:relative;z-index:12;pointer-events:none;}
.road-surface{width:100%;height:100%;background:linear-gradient(180deg,var(--road) 0%,#f09ab3 60%);border-radius:18px;box-shadow:0 20px 80px var(--road-shadow), inset 0 10px 30px rgba(255,255,255,0.02);overflow:hidden;position:relative;}
.lane-line{position:absolute;left:50%;transform:translateX(-50%);width:12px;height:200%;top:-50%;background:repeating-linear-gradient(to bottom,var(--white) 0px,var(--white) 46px,transparent 46px,transparent 96px);filter:drop-shadow(0 6px 18px rgba(255,120,140,0.06));animation:laneScroll 1.4s linear infinite;}
@keyframes laneScroll{from{background-position:0 0;}to{background-position:0 46px;}}
.midground{position:absolute;inset:0;pointer-events:none;z-index:14;}

.milestones{position:fixed;inset:0;z-index:40;pointer-events:none;}
.milestone-card{--card-w:clamp(240px,34vw,340px);position:absolute;left:50%;transform:translateX(-50%) translateY(90vh) rotateX(8deg) scale(0.98);width:var(--card-w);background:linear-gradient(180deg,rgba(255,255,255,0.98),rgba(255,255,255,0.96));border-radius:16px;padding:14px 18px;box-shadow:0 18px 60px rgba(255,60,120,0.12);border:1px solid rgba(255,255,255,0.6);text-align:center;color:var(--pink-600);font-weight:600;font-size:clamp(14px,2.4vw,18px);opacity:0;pointer-events:auto;will-change:transform,opacity,filter;transition:transform .4s ease;animation:milestoneMove var(--milestone-duration) linear infinite;}
.milestone-card::before{content:"";position:absolute;inset:-12px;background:radial-gradient(ellipse at center, rgba(255,95,162,0.14), transparent 35%);border-radius:inherit;z-index:-1;opacity:0;transition:opacity .26s ease;filter:blur(14px);}
.milestone-card .photo{display:block;width:70px;height:70px;margin:0 auto 10px;border-radius:50%;object-fit:cover;border:4px solid rgba(255,255,255,0.9);box-shadow:0 8px 26px rgba(255,80,140,0.12);}
.milestone-card .m-title{margin:0 0 6px;font-size:1.05rem;color:var(--pink-600);font-weight:700;}
.milestone-card .m-desc{margin:0;font-size:.95rem;color:#5b2d44;opacity:0.9;font-weight:500;}
.milestone-card.active{transform:translateX(-50%) translateY(0) rotateX(0deg) scale(1.02);opacity:1;}
.milestone-card.active::before{opacity:1;}
@keyframes milestoneMove{0%{transform:translateX(-50%) translateY(90vh) rotateX(8deg) scale(.98);opacity:0;filter:blur(0.4px);}10%{opacity:1;}40%{transform:translateX(-50%) translateY(6vh) rotateX(0deg) scale(1.02);opacity:1;filter:blur(0px);}60%{transform:translateX(-50%) translateY(-16vh) rotateX(-6deg) scale(.98);opacity:1;}88%{opacity:0.9;}100%{transform:translateX(-50%) translateY(-110vh) rotateX(-8deg) scale(.96);opacity:0;}}

.particles.hearts{position:fixed;inset:0;z-index:20;pointer-events:none;overflow:hidden;}
.heart{position:absolute;width:var(--hsize,26px);height:var(--hsize,26px);transform-origin:50% 50%;border-radius:18% 82% 50% 50%/60% 40% 60% 40%;background:linear-gradient(180deg,var(--pink-300),var(--pink-500));opacity:0.95;filter:drop-shadow(0 6px 18px rgba(255,80,140,0.08));will-change:transform,opacity;animation:heartRise var(--hvel,8s) linear infinite;}
.heart.gold{background:linear-gradient(180deg,#fff6e6,var(--gold));box-shadow:0 8px 30px rgba(255,200,110,0.12);}
@keyframes heartRise{0%{transform:translateY(0) rotate(0) scale(.9);opacity:0;}6%{opacity:1;}50%{transform:translateY(-46vh) rotate(160deg) scale(1);opacity:1;}100%{transform:translateY(-110vh) rotate(320deg) scale(.8);opacity:0;}}

.pet{position:absolute;width:14px;height:14px;border-radius:50%;background:linear-gradient(180deg,var(--pink-300),var(--pink-500));opacity:0.9;filter:blur(.4px);animation:petFloat linear infinite;}
@keyframes petFloat{0%{transform:translateY(0) translateX(0) rotate(0);}50%{transform:translateY(-30vh) translateX(8%) rotate(120deg);}100%{transform:translateY(-80vh) translateX(-6%) rotate(260deg);}}

.love-counter{position:fixed;top:18px;right:18px;z-index:70;pointer-events:auto;border-radius:999px;background:linear-gradient(180deg,rgba(255,255,255,0.12),rgba(255,255,255,0.06));border:1px solid var(--glass-border);padding:8px 12px;display:flex;align-items:center;gap:10px;box-shadow:0 8px 30px rgba(255,110,160,0.08);backdrop-filter:blur(6px) saturate(120%);min-width:118px;transition:transform .18s cubic-bezier(.2,.9,.2,1),box-shadow .18s;}
.love-counter:hover{transform:translateY(-2px) scale(1.01);box-shadow:0 12px 40px rgba(255,110,160,0.12);}
.lc-inner{display:flex;gap:10px;align-items:center;}
.lc-icon{font-size:20px;transform:translateY(-1px);}
.lc-text{text-align:left;line-height:1;}
.lc-days{font-weight:700;font-size:14px;color:var(--pink-600);}
.lc-sub{font-size:11px;opacity:0.85;color:#5b2d44;}
@keyframes lcPulse{0%{transform:scale(1);opacity:1;}50%{transform:scale(1.03);opacity:0.98;}100%{transform:scale(1);opacity:1;}}
#lcDays{animation:lcPulse 5.2s ease-in-out infinite;}

.loop-flash{position:fixed;inset:0;z-index:80;pointer-events:none;background:radial-gradient(circle at center, rgba(255,250,255,0.9), rgba(255,240,245,0.6) 30%, transparent 55%);opacity:0;transition:opacity .5s ease;}

@media(max-width:720px){.roadside{display:none;}.love-counter{right:12px;top:12px;padding:6px 10px;min-width:100px;}.milestone-card{--card-w:min(82vw,320px);font-size:14px;padding:12px;}.lane-line{width:8px;}}
.visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;border:0;padding:0;margin:-1px;}
.phase-dawn .bg-sky{background:linear-gradient(180deg,#fff0f6,#ffe7ef 30%,#fff6f9 100%);}
.phase-day .bg-sky{background:linear-gradient(180deg,#fff8fb,#fffdfd 30%,#fff 100%);}
.phase-evening .bg-sky{background:linear-gradient(180deg,#ffd9e9,#ffd3e8 40%,#fff4f6 100%);}
.phase-night .bg-sky{background:linear-gradient(180deg,#efeaf6,#efe8fb 40%,#fff 100%);}
.phase-night .bg-stars{opacity:0.28;}
.phase-night .bg-clouds{opacity:0.55;filter:blur(6px);}
.phase-night .lane-line{opacity:0.9;}
.hidden{display:none!important;}
.show{display:block!important;}

/* Pet floating animations (already partially included) */
.pet{position:absolute;width:14px;height:14px;border-radius:50%;background:linear-gradient(180deg,var(--pink-300),var(--pink-500));opacity:0.9;filter:blur(.4px);animation:petFloat linear infinite;}
@keyframes petFloat{
  0%{transform:translateY(0) translateX(0) rotate(0);}
  50%{transform:translateY(-30vh) translateX(8%) rotate(120deg);}
  100%{transform:translateY(-80vh) translateX(-6%) rotate(260deg);}
}

/* Hearts floating */
.heart{position:absolute;width:var(--hsize,26px);height:var(--hsize,26px);transform-origin:50% 50%;border-radius:18% 82% 50% 50 / 60% 40% 60% 40%;background:linear-gradient(180deg,var(--pink-300),var(--pink-500));opacity:0.95;filter:drop-shadow(0 6px 18px rgba(255,80,140,0.08));animation:heartRise var(--hvel,8s) linear infinite;}
.heart.gold{background:linear-gradient(180deg,#fff6e6,var(--gold));box-shadow:0 8px 30px rgba(255,200,110,0.12);}
@keyframes heartRise{
  0%{transform:translateY(0) rotate(0) scale(.9);opacity:0;}
  6%{opacity:1;}
  50%{transform:translateY(-46vh) rotate(160deg) scale(1);opacity:1;}
  100%{transform:translateY(-110vh) rotate(320deg) scale(.8);opacity:0;}
}

/* Love counter pulse */
#lcDays{animation:lcPulse 5.2s ease-in-out infinite;}
@keyframes lcPulse{0%{transform:scale(1);opacity:1;}50%{transform:scale(1.03);opacity:0.98;}100%{transform:scale(1);opacity:1;}}

/* Loop flash animation */
.loop-flash{position:fixed;inset:0;z-index:80;pointer-events:none;background:radial-gradient(circle at center,rgba(255,250,255,0.9),rgba(255,240,245,0.6) 30%,transparent 55%);opacity:0;transition:opacity .5s ease;}

/* Responsive tweaks */
@media(max-width:720px){
  .roadside{display:none;}
  .love-counter{right:12px;top:12px;padding:6px 10px;min-width:100px;}
  .milestone-card{--card-w:min(82vw,320px);font-size:14px;padding:12px;}
  .lane-line{width:8px;}
}

/* Utility classes */
.hidden{display:none!important;}
.show{display:block!important;}
.visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;border:0;padding:0;margin:-1px;}

/* Sky phase backgrounds (already included) */
.phase-dawn .bg-sky{background:linear-gradient(180deg,#fff0f6,#ffe7ef 30%,#fff6f9 100%);}
.phase-day .bg-sky{background:linear-gradient(180deg,#fff8fb,#fffdfd 30%,#fff 100%);}
.phase-evening .bg-sky{background:linear-gradient(180deg,#ffd9e9,#ffd3e8 40%,#fff4f6 100%);}
.phase-night .bg-sky{background:linear-gradient(180deg,#efeaf6,#efe8fb 40%,#fff 100%);}
.phase-night .bg-stars{opacity:0.28;}
.phase-night .bg-clouds{opacity:0.55;filter:blur(6px);}
.phase-night .lane-line{opacity:0.9;}
